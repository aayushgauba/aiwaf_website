<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django Management Commands - AIWAF</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%); color: #e0e0e0; line-height: 1.6; overflow-x: hidden; }
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        .header { background: rgba(16, 16, 30, 0.9); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); position: fixed; top: 0; width: 100%; z-index: 1000; transition: all 0.3s ease; }
        .header-content { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; }
        .logo { font-size: 2rem; font-weight: 800; background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1); background-size: 200% 200%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: gradientShift 3s ease-in-out infinite; }
        @keyframes gradientShift { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
        .nav { display: flex; gap: 2rem; }
        .nav-link { color: #e0e0e0; text-decoration: none; padding: 0.5rem 1rem; border-radius: 50px; transition: all 0.3s ease; }
        .nav-link:hover { color: #4ecdc4; transform: translateY(-2px); }
        .main-content { display: grid; grid-template-columns: 300px 1fr; gap: 3rem; padding: 120px 0 3rem; position: relative; }
        .sidebar { background: rgba(16, 16, 30, 0.6); backdrop-filter: blur(10px); border-radius: 20px; padding: 2rem; height: fit-content; position: sticky; top: 120px; border: 1px solid rgba(255, 255, 255, 0.1); }
        .sidebar-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 1.5rem; color: #4ecdc4; }
        .sidebar-nav { list-style: none; }
        .sidebar-nav li { margin-bottom: 0.5rem; }
        .sidebar-nav a { color: #b0b0b0; text-decoration: none; padding: 0.5rem 1rem; border-radius: 10px; display: block; transition: all 0.3s ease; }
        .sidebar-nav a:hover, .sidebar-nav a.active { background: rgba(78, 205, 196, 0.2); color: #4ecdc4; transform: translateX(5px); }
        .content { background: rgba(16, 16, 30, 0.4); backdrop-filter: blur(10px); border-radius: 20px; padding: 3rem; border: 1px solid rgba(255, 255, 255, 0.1); }
        .page-title { font-size: 3rem; font-weight: 900; margin-bottom: 2rem; background: linear-gradient(45deg, #ff6b6b, #4ecdc4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .django-badge { background: linear-gradient(45deg, #092e20, #0c4b33); color: #fff; padding: 0.5rem 1rem; border-radius: 25px; font-weight: 600; display: inline-block; margin-bottom: 2rem; }
        .section { margin-bottom: 3rem; }
        .section h2 { font-size: 2rem; color: #ff6b6b; margin-bottom: 1rem; }
        .section h3 { font-size: 1.5rem; color: #4ecdc4; margin-bottom: 1rem; margin-top: 2rem; }
        .section h4 { font-size: 1.2rem; color: #4ecdc4; margin-bottom: 0.5rem; margin-top: 1rem; }
        .command-table { width: 100%; border-collapse: collapse; margin: 2rem 0; background: rgba(0, 0, 0, 0.3); border-radius: 10px; overflow: hidden; }
        .command-table th, .command-table td { padding: 1rem; text-align: left; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .command-table th { background: rgba(78, 205, 196, 0.2); color: #4ecdc4; font-weight: 600; }
        .command-table td code { background: rgba(78, 205, 196, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: #4ecdc4; font-size: 0.9rem; }
        .code-block { background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 1.5rem; margin: 1rem 0; font-family: 'Fira Code', monospace; font-size: 0.9rem; overflow-x: auto; }
        .code-block pre { color: #e0e0e0; }
        .warning { background: rgba(255, 107, 107, 0.1); border: 1px solid rgba(255, 107, 107, 0.3); border-radius: 10px; padding: 1rem; margin: 1rem 0; }
        .warning strong { color: #ff6b6b; }
        .info-box { background: rgba(78, 205, 196, 0.1); border: 1px solid rgba(78, 205, 196, 0.3); border-radius: 10px; padding: 1rem; margin: 1rem 0; }
        .info-box strong { color: #4ecdc4; }
        .command-card { background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 1.5rem; margin: 1.5rem 0; transition: all 0.3s ease; }
        .command-card:hover { transform: translateY(-3px); border-color: rgba(78, 205, 196, 0.5); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
        .command-name { font-size: 1.3rem; color: #ff6b6b; margin-bottom: 0.5rem; font-family: 'Fira Code', monospace; }
        .command-purpose { color: #b0b0b0; margin-bottom: 1rem; }
        .usage-examples { margin-top: 1rem; }
        .usage-examples h5 { color: #4ecdc4; margin-bottom: 0.5rem; }
        .best-practices { background: rgba(69, 183, 209, 0.1); border-left: 4px solid #45b7d1; padding: 1rem; margin: 1rem 0; border-radius: 0 10px 10px 0; }
        .contribute-link { color: #b0b0b0; text-decoration: none; padding: 0.5rem; border-radius: 8px; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem; }
        .contribute-link:hover { background: rgba(78, 205, 196, 0.1); color: #4ecdc4; transform: translateX(3px); }
        @media (max-width: 1024px) { .main-content { grid-template-columns: 1fr; } .sidebar { position: static; order: -1; } }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">AIWAF</div>
                <nav class="nav">
                    <a href="/" class="nav-link">Home</a>
                    <a href="/docs" class="nav-link">Documentation</a>
                </nav>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <aside class="sidebar">
                <h3 class="sidebar-title">Django Documentation</h3>
                <ul class="sidebar-nav">
                    <li><a href="/docs/django">Overview</a></li>
                    <li><a href="/docs/django/installation">Installation</a></li>
                    <li><a href="/docs/django/middleware">Middleware Setup</a></li>
                    <li><a href="/docs/django/commands" class="active">Management Commands</a></li>
                </ul>
                <div style="margin-top: 2rem; padding: 1rem; background: rgba(78, 205, 196, 0.1); border-radius: 10px;">
                    <small>üìñ <a href="https://docs.djangoproject.com/en/stable/" target="_blank" style="color: #4ecdc4;">Official Django Docs</a></small>
                </div>
                
                <div style="margin-top: 1.5rem;">
                    <h3 style="font-size: 1rem; font-weight: 700; margin-bottom: 1rem; color: #4ecdc4;">ü§ù Contribute</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                        <a href="https://github.com/aayushgauba/aiwaf" target="_blank" class="contribute-link">
                            <span>üìö</span> GitHub Repository
                        </a>
                        <a href="https://discord.gg/rZ8Mg5CWeH" target="_blank" class="contribute-link">
                            <span>üí¨</span> Discord Community
                        </a>
                    </div>
                </div>
            </aside>

            <main class="content">
                <div class="django-badge">‚ö° Django Management</div>
                <h1 class="page-title">Management Commands</h1>
                
                <p>Comprehensive documentation for all AIWAF Django management commands, including usage examples and detailed explanations for training, monitoring, and maintaining your AIWAF security system.</p>

                <div class="section">
                    <h2>üìã Quick Reference</h2>
                    <table class="command-table">
                        <thead>
                            <tr>
                                <th>Command</th>
                                <th>Purpose</th>
                                <th>Usage Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>add_ipexemption</code></td>
                                <td>Exempt IP from blocking</td>
                                <td><code>python manage.py add_ipexemption 192.168.1.100</code></td>
                            </tr>
                            <tr>
                                <td><code>aiwaf_logging</code></td>
                                <td>View and manage logs</td>
                                <td><code>python manage.py aiwaf_logging --recent</code></td>
                            </tr>
                            <tr>
                                <td><code>aiwaf_reset</code></td>
                                <td>Reset/clear AIWAF data</td>
                                <td><code>python manage.py aiwaf_reset --blacklist</code></td>
                            </tr>
                            <tr>
                                <td><code>detect_and_train</code></td>
                                <td>Train AIWAF from logs</td>
                                <td><code>python manage.py detect_and_train /var/log/nginx/access.log</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="section">
                    <h2>üõ°Ô∏è IP Exemption Commands</h2>
                    
                    <div class="command-card">
                        <div class="command-name">add_ipexemption</div>
                        <div class="command-purpose">Add an IP address to the exemption list to prevent it from being blocked by any AIWAF middleware.</div>
                        
                        <h4>Syntax</h4>
                        <div class="code-block">
<pre>python manage.py add_ipexemption &lt;ip_address&gt; [--reason "reason"]</pre>
                        </div>

                        <h4>Arguments</h4>
                        <ul style="color: #b0b0b0; margin-left: 1.5rem;">
                            <li><strong>ip_address</strong> (required): The IP address to exempt from blocking</li>
                            <li><strong>--reason</strong> (optional): Reason for the exemption (for documentation)</li>
                        </ul>

                        <div class="usage-examples">
                            <h5>Examples</h5>
                            <div class="code-block">
<pre># Basic exemption
python manage.py add_ipexemption 192.168.1.100

# Exemption with reason
python manage.py add_ipexemption 203.0.113.45 --reason "Office IP address"

# Exemption for monitoring service
python manage.py add_ipexemption 198.51.100.25 --reason "Uptime monitoring service"

# Exemption for CDN
python manage.py add_ipexemption 104.16.0.0 --reason "Cloudflare CDN"</pre>
                            </div>
                        </div>

                        <div class="info-box">
                            <strong>Use Cases:</strong><br>
                            ‚Ä¢ Office/Admin IPs: Prevent blocking legitimate admin access<br>
                            ‚Ä¢ Monitoring Services: Exempt uptime monitoring and health checks<br>
                            ‚Ä¢ CDN/Proxy IPs: Whitelist CDN edge servers<br>
                            ‚Ä¢ API Clients: Exempt legitimate API consumers
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>üìä Logging and Monitoring Commands</h2>
                    
                    <div class="command-card">
                        <div class="command-name">aiwaf_logging</div>
                        <div class="command-purpose">View, analyze, and manage AIWAF logs and blocking activity.</div>
                        
                        <h4>Syntax</h4>
                        <div class="code-block">
<pre>python manage.py aiwaf_logging [options]</pre>
                        </div>

                        <h4>Options</h4>
                        <ul style="color: #b0b0b0; margin-left: 1.5rem;">
                            <li><strong>--recent</strong>: Show recent blocking activity</li>
                            <li><strong>--stats</strong>: Display blocking statistics</li>
                            <li><strong>--ip &lt;ip_address&gt;</strong>: Show activity for specific IP</li>
                            <li><strong>--keyword &lt;keyword&gt;</strong>: Show blocks related to specific keyword</li>
                            <li><strong>--export &lt;file&gt;</strong>: Export logs to file</li>
                            <li><strong>--clear</strong>: Clear old log entries</li>
                        </ul>

                        <div class="usage-examples">
                            <h5>Examples</h5>
                            <div class="code-block">
<pre># View recent blocking activity
python manage.py aiwaf_logging --recent

# Show statistics
python manage.py aiwaf_logging --stats

# Check specific IP activity
python manage.py aiwaf_logging --ip 192.168.1.50

# Find keyword-related blocks
python manage.py aiwaf_logging --keyword "admin"

# Export logs to CSV
python manage.py aiwaf_logging --export /tmp/aiwaf_logs.csv

# Clear old logs (older than 30 days)
python manage.py aiwaf_logging --clear</pre>
                            </div>
                        </div>

                        <h4>Sample Output</h4>
                        <div class="code-block">
<pre>Recent AIWAF Activity (Last 24 hours):
=====================================

üö´ BLOCKED: 203.0.113.25
   Time: 2025-09-01 14:30:25
   Reason: Keyword block: wp-admin
   Path: /wp-admin/admin.php
   User-Agent: curl/7.68.0

üö´ BLOCKED: 198.51.100.15  
   Time: 2025-09-01 14:28:10
   Reason: Header validation failed (score: 2/11)
   Path: /login
   User-Agent: python-requests/2.25.1

üìä Statistics:
   Total blocks today: 47
   Top blocked keywords: wp-admin, config, backup
   Most blocked IPs: 203.0.113.25 (12), 198.51.100.15 (8)</pre>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>üîÑ Data Management Commands</h2>
                    
                    <div class="command-card">
                        <div class="command-name">aiwaf_reset</div>
                        <div class="command-purpose">Reset or clear specific types of AIWAF data for maintenance or troubleshooting.</div>
                        
                        <h4>Syntax</h4>
                        <div class="code-block">
<pre>python manage.py aiwaf_reset [options]</pre>
                        </div>

                        <h4>Options</h4>
                        <ul style="color: #b0b0b0; margin-left: 1.5rem;">
                            <li><strong>--blacklist</strong>: Clear IP blacklist</li>
                            <li><strong>--keywords</strong>: Clear learned keywords</li>
                            <li><strong>--exemptions</strong>: Clear IP exemptions</li>
                            <li><strong>--logs</strong>: Clear activity logs</li>
                            <li><strong>--all</strong>: Clear all AIWAF data</li>
                            <li><strong>--confirm</strong>: Skip confirmation prompt</li>
                        </ul>

                        <div class="usage-examples">
                            <h5>Examples</h5>
                            <div class="code-block">
<pre># Clear blacklisted IPs
python manage.py aiwaf_reset --blacklist

# Clear learned keywords
python manage.py aiwaf_reset --keywords

# Clear exemptions (be careful!)
python manage.py aiwaf_reset --exemptions

# Clear activity logs
python manage.py aiwaf_reset --logs

# Reset everything (with confirmation)
python manage.py aiwaf_reset --all

# Reset without confirmation prompt
python manage.py aiwaf_reset --blacklist --confirm</pre>
                            </div>
                        </div>

                        <div class="warning">
                            <strong>Warning:</strong> These operations cannot be undone. Always ensure you have backups before performing resets, especially with --exemptions or --all options.
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>ü§ñ Training and Learning Commands</h2>
                    
                    <div class="command-card">
                        <div class="command-name">detect_and_train</div>
                        <div class="command-purpose">Train AIWAF by analyzing server access logs to learn attack patterns and legitimate traffic.</div>
                        
                        <h4>Syntax</h4>
                        <div class="code-block">
<pre>python manage.py detect_and_train &lt;log_file&gt; [options]</pre>
                        </div>

                        <h4>Arguments & Options</h4>
                        <ul style="color: #b0b0b0; margin-left: 1.5rem;">
                            <li><strong>log_file</strong> (required): Path to server access log file</li>
                            <li><strong>--disable-ai</strong>: Train without AI model (keyword learning only)</li>
                            <li><strong>--log-format &lt;format&gt;</strong>: Specify log format (nginx, apache, custom)</li>
                            <li><strong>--limit &lt;number&gt;</strong>: Process only specified number of log lines</li>
                            <li><strong>--verbose</strong>: Show detailed training progress</li>
                            <li><strong>--dry-run</strong>: Analyze without making changes</li>
                        </ul>

                        <div class="usage-examples">
                            <h5>Examples</h5>
                            <div class="code-block">
<pre># Basic training from Nginx logs
python manage.py detect_and_train /var/log/nginx/access.log

# Training without AI (keyword learning only)
python manage.py detect_and_train /var/log/nginx/access.log --disable-ai

# Training with verbose output
python manage.py detect_and_train /var/log/apache2/access.log --verbose

# Dry run to see what would be learned
python manage.py detect_and_train /var/log/nginx/access.log --dry-run

# Train on limited log entries
python manage.py detect_and_train /var/log/nginx/access.log --limit 10000</pre>
                            </div>
                        </div>

                        <h4>Training Output</h4>
                        <div class="code-block">
<pre>ü§ñ AIWAF Training Started
========================

üìÇ Log file: /var/log/nginx/access.log
üìä Processing 50,847 log entries...

üîç Analysis Progress:
   ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì 100% (50,847/50,847)

üìà Training Results:
   ‚úÖ Learned Keywords: 23 new malicious patterns
      - Top keywords: wp-config, phpmyadmin, backup
   
   ‚úÖ AI Model: Trained on 1,247 attack samples
      - Accuracy: 94.2%
      - False positive rate: 0.8%
   
   ‚úÖ IP Analysis: 15 IPs identified as suspicious
      - Auto-blocked: 12 IPs
      - Review recommended: 3 IPs

‚è±Ô∏è  Training completed in 2.3 seconds</pre>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>üöÄ Usage Workflows</h2>
                    
                    <h3>Initial Setup Workflow</h3>
                    <div class="code-block">
<pre># 1. Train AIWAF from existing logs
python manage.py detect_and_train /var/log/nginx/access.log

# 2. Exempt your admin IPs
python manage.py add_ipexemption 192.168.1.100 --reason "Admin office"

# 3. Check training results
python manage.py aiwaf_logging --stats</pre>
                    </div>

                    <h3>Daily Monitoring Workflow</h3>
                    <div class="code-block">
<pre># Check recent activity
python manage.py aiwaf_logging --recent

# Export daily report
python manage.py aiwaf_logging --export /reports/aiwaf_$(date +%Y%m%d).csv

# Check for specific threats
python manage.py aiwaf_logging --keyword "exploit"</pre>
                    </div>

                    <h3>Maintenance Workflow</h3>
                    <div class="code-block">
<pre># Clear old logs monthly
python manage.py aiwaf_logging --clear

# Retrain periodically
python manage.py detect_and_train /var/log/nginx/access.log

# Reset false positives if needed
python manage.py aiwaf_reset --blacklist</pre>
                    </div>
                </div>

                <div class="section">
                    <h2>üìù Best Practices</h2>
                    
                    <div class="best-practices">
                        <h4>Security Best Practices</h4>
                        <ul style="color: #b0b0b0; margin-left: 1.5rem;">
                            <li><strong>Regular Training:</strong> Retrain AIWAF weekly with fresh logs</li>
                            <li><strong>Monitor Exemptions:</strong> Regularly review exempted IPs</li>
                            <li><strong>Backup Data:</strong> Export logs before major resets</li>
                            <li><strong>Test Changes:</strong> Use --dry-run before applying changes</li>
                        </ul>
                    </div>

                    <div class="best-practices">
                        <h4>Performance Best Practices</h4>
                        <ul style="color: #b0b0b0; margin-left: 1.5rem;">
                            <li><strong>Log Rotation:</strong> Clear old logs to prevent database bloat</li>
                            <li><strong>Limit Training:</strong> Use --limit for large log files</li>
                            <li><strong>Scheduled Training:</strong> Run training during low-traffic hours</li>
                            <li><strong>Monitor Resources:</strong> Check disk space and memory usage</li>
                        </ul>
                    </div>

                    <div class="best-practices">
                        <h4>Operational Best Practices</h4>
                        <ul style="color: #b0b0b0; margin-left: 1.5rem;">
                            <li><strong>Document Exemptions:</strong> Always use --reason for exemptions</li>
                            <li><strong>Regular Monitoring:</strong> Check logs daily for new threats</li>
                            <li><strong>False Positive Handling:</strong> Have a process for handling legitimate blocks</li>
                            <li><strong>Version Control:</strong> Track configuration changes</li>
                        </ul>
                    </div>
                </div>

                <div class="section">
                    <h2>üÜò Troubleshooting</h2>
                    
                    <h3>Common Issues</h3>
                    
                    <h4>"Command not found"</h4>
                    <div class="code-block">
<pre># Solution: Ensure AIWAF is in INSTALLED_APPS
# Check settings.py contains:
INSTALLED_APPS = [
    # ... other apps ...
    'aiwaf',
]</pre>
                    </div>

                    <h4>"Permission denied accessing log file"</h4>
                    <div class="code-block">
<pre># Solution: Check file permissions
sudo chmod 644 /var/log/nginx/access.log
# Or run with appropriate permissions
sudo python manage.py detect_and_train /var/log/nginx/access.log</pre>
                    </div>

                    <h4>"No log entries processed"</h4>
                    <div class="code-block">
<pre># Solution: Check log format and file content
python manage.py detect_and_train /var/log/nginx/access.log --verbose</pre>
                    </div>

                    <h4>"Database locked" errors</h4>
                    <div class="code-block">
<pre># Solution: Ensure Django database is properly configured
python manage.py migrate</pre>
                    </div>

                    <div class="info-box">
                        <strong>Getting Help:</strong><br>
                        ‚Ä¢ <strong>Command Help:</strong> Add --help to any command for detailed usage<br>
                        ‚Ä¢ <strong>Verbose Mode:</strong> Use --verbose for detailed operation logs<br>
                        ‚Ä¢ <strong>Dry Run:</strong> Use --dry-run to test without making changes<br>
                        ‚Ä¢ <strong>Log Analysis:</strong> Check Django logs for detailed error messages
                    </div>
                </div>
            </main>
        </div>
    </div>
</body>
</html>
